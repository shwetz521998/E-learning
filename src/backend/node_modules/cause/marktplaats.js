// var graze = require('graze');
var sf = require('sf');
var request = require('request');
var cheerio = require('cheerio');


var url = sf(
	'http://www.marktplaats.nl/z/huizen-en-kamers/huizen-te-huur/den-haag.html?categoryId=2143&attributes=S%2C4549&priceFrom={price_min}%2C00&priceTo={price_max}%2C00&currentPage={page}&numberOfResultsPerPage={results}',
	{
		page: 1,
		results: 100,
		price_min: 500,
		price_max: 900
	}
);
console.log(url);


var req_opts = _.defaults(
	{ url: url },
	scraping.request_defaults()
);
request(req_opts, function(err, res, body) {
	
}).on('error', function(err) {
	// cause.handle_error(err);
});


/*var template = graze.template({
	'.search-results-table article.search-result': {
		results: [{
			'.listing-title-description': {
				// 'h2.heading': {
				// 	title: graze.text()
				// },
				// '.mp-listing-description-extended': {
				// 	description: graze.text()
				// },
				// '.listing-priority-product-container': {
				// 	info_items: [{
				// 		'.mp-listing-attributes': graze.text()
				// 	}]
				// },
				// '.price': {
				// 	price: graze.text()
				// },
				// '.listing-image img': {
				// 	image: graze.attr('src')
				// }
			}
		}],
	},
});

template.scrape(url)
	.then(function(result) {
		console.log(result);
	})
	.fail(function(err) {
		throw err;
	});*/


// var scrapy = require('node-scrapy');

// var model = {
// 	items: '.search-results-table article.search-result',
// 	info: '.search-results-table article.search-result .mp-listing-attributes'
// };


// scrapy.scrape(url, model, function(err, data) {
// 	if (err) return console.log(err)
// 	console.log(data);
// });